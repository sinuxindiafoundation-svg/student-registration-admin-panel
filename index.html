<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sinux India Center</title>
<style>
body { font-family: Arial, sans-serif; margin: 0; background: #f8f9fa; }
header { background: #007bff; color: white; padding: 10px; text-align: center; position: relative; display: flex; align-items: center; justify-content: center; }
header img { height: 50px; margin-right: 15px; }
header h1 { margin:0; }
#logoutBtn { position: absolute; right: 15px; top: 15px; background: #dc3545; border: none; padding: 8px 12px; color: white; cursor: pointer; border-radius: 4px; }
.container { width: 350px; margin: 50px auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
h2 { text-align:center; margin-bottom:20px; }
input, select, textarea, button { width:100%; padding:10px; margin:8px 0; border:1px solid #ccc; border-radius:5px; }
button { background:#007bff; color:white; border:none; cursor:pointer; font-size:16px; }
button:hover { background:#0056b3; }
.dashboard { display:none; padding:20px; }
.form-box { max-width:400px; margin:auto; background:white; padding:20px; border-radius:8px; box-shadow:0 0 10px rgba(0,0,0,0.1); }
table { width:100%; border-collapse: collapse; margin-top:20px; background:white; box-shadow:0 0 10px rgba(0,0,0,0.1); }
th, td { padding:10px; border:1px solid #ddd; text-align:center; }
th { background:#007bff; color:white; }
.action-btn { padding:5px 10px; margin:2px; border:none; border-radius:4px; cursor:pointer; color:white; }
.edit-btn { background:#28a745; }
.delete-btn { background:#dc3545; }
.search-box { margin:20px 0; text-align:center; }
.search-box input { width:250px; padding:8px; }
.export-btn, .print-btn { background:#17a2b8; margin:10px 5px; }
.summary-box { background:white; padding:15px; border-radius:8px; margin:20px auto; max-width:400px; text-align:center; box-shadow:0 0 10px rgba(0,0,0,0.1); }
</style>
</head>
<body>

<header>
  <img src="https://imgbb.com/"><img src="https://i.ibb.co/W4CT328M/sinux112.png" alt="Logo">
  <h1>Sinux India Center</h1>
  <button id="logoutBtn" onclick="logout()">Logout</button>
</div>

<!-- Login Section -->
<div class="container" id="login-box">
  <h2>Center Login</h2>
  <form onsubmit="return loginCenter(event)">
    <label>Select Center</label>
    <select id="centerSelect" required>
      <option value="">--Select Center--</option>
      <option>Delhi</option>
      <option>Mumbai</option>
      <option>Bangalore</option>
      <option>Chennai</option>
    </select>
    <input type="text" id="username" placeholder="Username" required>
    <input type="password" id="password" placeholder="Password" required>
    <button type="submit">Login</button>
  </form>
</div>

<!-- Dashboard -->
<div class="dashboard" id="dashboard">
  <h2 id="centerTitle">Dashboard</h2>

  <div class="summary-box" id="summaryBox">
    <!-- Center-wise student count -->
  </div>

  <div class="form-box">
    <form onsubmit="return registerStudent(event)">
      <input type="hidden" id="editIndex">
      <label>Student Name</label><input type="text" id="studentName" required>
      <label>Age</label><input type="number" id="age" min="3" max="18" required>
      <label>Gender</label>
      <select id="gender" required><option value="">--Select--</option><option>Male</option><option>Female</option><option>Other</option></select>
      <label>Class</label>
      <select id="class" required><option value="">--Select--</option><option>Nursery</option><option>LKG</option><option>UKG</option><option>1st</option><option>2nd</option><option>3rd</option><option>4th</option><option>5th</option></select>
      <label>Parent/Guardian Name</label><input type="text" id="parent" required>
      <label>Contact Number</label><input type="tel" id="contact" pattern="[0-9]{10}" placeholder="10-digit number" required>
      <label>Address</label><textarea id="address" rows="3" required></textarea>
      <button type="submit" id="submitBtn">Register</button>
    </form>
  </div>

  <div class="search-box">
    <input type="text" id="searchInput" placeholder="Search by Name or Class..." onkeyup="searchStudent()">
    <button class="export-btn" onclick="exportCSV()">Export CSV</button>
    <button class="print-btn" onclick="printTable()">Print</button>
  </div>

  <table id="studentTable">
    <thead>
      <tr>
        <th>Name</th><th>Age</th><th>Gender</th><th>Class</th><th>Parent</th><th>Contact</th><th>Address</th><th>Actions</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<script>
let currentCenter = "";

function loginCenter(event){
  event.preventDefault();
  let center = document.getElementById("centerSelect").value;
  let user = document.getElementById("username").value;
  let pass = document.getElementById("password").value;
  if(center && user==="admin" && pass==="12345"){
    currentCenter=center;
    document.getElementById("login-box").style.display="none";
    document.getElementById("dashboard").style.display="block";
    document.getElementById("centerTitle").innerText=currentCenter+" Dashboard";
    loadStudents();
    updateSummary();
  }else{alert("Invalid Login!");}
  return false;
}

function logout(){if(confirm("Logout?")) location.reload();}

function getStudents(){let allData=JSON.parse(localStorage.getItem("allCenters"))||{};return allData[currentCenter]||[];}
function saveStudents(data){let allData=JSON.parse(localStorage.getItem("allCenters"))||{};allData[currentCenter]=data;localStorage.setItem("allCenters",JSON.stringify(allData));}

function renderTable(students){
  let table=document.getElementById("studentTable").getElementsByTagName("tbody")[0];
  table.innerHTML="";
  students.forEach((student,index)=>{
    let newRow=table.insertRow();
    newRow.insertCell(0).innerText=student.name;
    newRow.insertCell(1).innerText=student.age;
    newRow.insertCell(2).innerText=student.gender;
    newRow.insertCell(3).innerText=student.cls;
    newRow.insertCell(4).innerText=student.parent;
    newRow.insertCell(5).innerText=student.contact;
    newRow.insertCell(6).innerText=student.address;
    let actionCell=newRow.insertCell(8);
    actionCell.innerHTML=`<button class="action-btn edit-btn" onclick="editStudent(${index})">Edit</button>
                          <button class="action-btn delete-btn" onclick="deleteStudent(${index})">Delete</button>`;
  });
}

function loadStudents(){renderTable(getStudents());updateSummary();}

function registerStudent(event){
  event.preventDefault();
  let name=document.getElementById("studentName").value;
  let age=document.getElementById("age").value;
  let gender=document.getElementById("gender").value;
  let cls=document.getElementById("class").value;
  let parent=document.getElementById("parent").value;
  let contact=document.getElementById("contact").value;
  let address=document.getElementById("address").value;
  let editIndex=document.getElementById("editIndex").value;
  let students=getStudents();
  if(editIndex===""){students.push({name,age,gender,cls,parent,contact,address});alert("Registration Successful!");}
  else{students[editIndex]={name,age,gender,cls,parent,contact,address};alert("Record Updated!");document.getElementById("submitBtn").innerText="Register";document.getElementById("editIndex").value="";}
  saveStudents(students);renderTable(students);document.querySelector("#dashboard form").reset();updateSummary();
}

function editStudent(index){
  let students=getStudents();
  let student=students[index];
  document.getElementById("studentName").value=student.name;
  document.getElementById("age").value=student.age;
  document.getElementById("gender").value=student.gender;
  document.getElementById("class").value=student.cls;
  document.getElementById("parent").value=student.parent;
  document.getElementById("contact").value=student.contact;
  document.getElementById("address").value=student.address;
  document.getElementById("submitBtn").innerText="Update";
  document.getElementById("editIndex").value=index;
}

function deleteStudent(index){if(confirm("Delete this record?")){let students=getStudents();students.splice(index,1);saveStudents(students);renderTable(students);updateSummary();}}

function searchStudent(){
  let filter=document.getElementById("searchInput").value.toLowerCase();
  let students=getStudents();
  renderTable(students.filter(s=>s.name.toLowerCase().includes(filter)||s.cls.toLowerCase().includes(filter)));
}

function exportCSV(){
  let students=getStudents();
  if(students.length===0){alert("No data to export!");return;}
  let csvContent="data:text/csv;charset=utf-8,"+["Name,Age,Gender,Class,Parent,Contact,Address"].join(",")+"\n"+students.map(s=>`${s.name},${s.age},${s.gender},${s.cls},${s.parent},${s.contact},${s.address}`).join("\n");
  let encodedUri=encodeURI(csvContent);
  let link=document.createElement("a");link.setAttribute("href",encodedUri);link.setAttribute("download",`${currentCenter}_students.csv`);document.body.appendChild(link);link.click();document.body.removeChild(link);
}

function printTable(){let table=document.getElementById("studentTable").outerHTML;let newWin=window.open("");newWin.document.write(`<h2>${currentCenter} Students</h2>${table}`);newWin.print();newWin.close();}

function updateSummary(){
  let allData=JSON.parse(localStorage.getItem("allCenters"))||{};
  let summary="";
  for(let center in allData){summary+=`<p><strong>${center}:</strong> ${allData[center].length} Students</p>`;}
  document.getElementById("summaryBox").innerHTML=summary;
}
</script>

</body>
</html>

