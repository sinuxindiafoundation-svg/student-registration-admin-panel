<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sinux India Center Panel</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  :root{--blue:#007bff;--dark:#343a40;--muted:#f1f3f5}
  body{font-family:Arial,Helvetica,sans-serif;background:#f4f6f8;margin:0;color:#222}
  header{background:var(--blue);color:white;padding:10px 16px;display:flex;align-items:center;justify-content:center}
  .header-content{display:flex;align-items:center;gap:12px}
  header img{height:48px}
  .title-box{display:flex;flex-direction:column;align-items:flex-start}
  header h1{margin:0;font-size:20px}
  .wrap{max-width:1100px;margin:18px auto;padding:8px}
  .card{background:white;border-radius:8px;padding:14px;box-shadow:0 6px 18px rgba(0,0,0,.06);margin-bottom:14px}
  .flex{display:flex;gap:12px;align-items:center}
  .nav{display:flex;gap:8px;margin-bottom:12px;flex-wrap:wrap}
  .nav button{padding:8px 12px;border-radius:6px;border:1px solid #e0e0e0;background:white;cursor:pointer}
  .nav button.active{background:var(--blue);color:white;border-color:var(--blue)}
  h2{margin:0 0 8px 0}
  label{display:block;margin:8px 0 4px}
  input,select,textarea{width:100%;padding:8px;border:1px solid #ccc;border-radius:6px;box-sizing:border-box}
  button.primary{background:var(--blue);color:white;padding:10px;border:none;border-radius:6px;cursor:pointer}
  .small{font-size:13px;color:#555}
  table{width:100%;border-collapse:collapse}
  th,td{padding:8px;border:1px solid #e6e6e6;text-align:center;font-size:14px}
  th{background:var(--blue);color:white}
  .action-btn{padding:6px 8px;border-radius:6px;border:none;color:white;cursor:pointer}
  .edit-btn{background:#28a745}
  .del-btn{background:#dc3545}
  .pay-btn{background:#17a2b8}
  .top-cards{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:10px}
  .top-card{flex:1;min-width:180px;background:white;padding:12px;border-radius:6px;box-shadow:0 3px 8px rgba(0,0,0,0.08)}
  .muted{color:#666;font-size:13px}
  .search-row{display:flex;gap:8px;align-items:center}
  .search-row input{width:300px;max-width:60%}
  .controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  .small-btn{padding:6px 8px;border-radius:6px;border:none;background:#6c757d;color:white;cursor:pointer}
  @media(max-width:800px){.flex{flex-direction:column;align-items:stretch}}
</style>
</head>
<body>

<header>
  <div class="header-content">
    <img src="https://i.ibb.co/W4CT328M/sinux112.png" alt="Logo">
    <div class="title-box">
      <h1>Sinux India Center</h1>
    </div>
  </div>
</header>

<div class="wrap">

  <!-- NAVIGATION -->
  <div class="nav card">
    <button class="nav-btn active" data-view="dashboard" onclick="switchView(event)">Dashboard</button>
    <button class="nav-btn" data-view="students" onclick="switchView(event)">Students</button>
    <button class="nav-btn" data-view="fees" onclick="switchView(event)">Fees</button>
    <button class="nav-btn" data-view="teachers" onclick="switchView(event)">Teachers</button>
    <button class="nav-btn" data-view="reports" onclick="switchView(event)">Reports</button>
  </div>

  <!-- DASHBOARD -->
  <div id="view-dashboard" class="card">
    <div class="top-cards">
      <div class="top-card"><h3 id="card-centers">1</h3><div class="muted">Total Centers</div></div>
      <div class="top-card"><h3 id="card-students">0</h3><div class="muted">Total Students</div></div>
      <div class="top-card"><h3 id="card-income">₹0</h3><div class="muted">Monthly Income</div></div>
      <div class="top-card"><h3 id="card-teachers">0</h3><div class="muted">Total Teachers</div></div>
    </div>
    <canvas id="centerChart" height="200"></canvas>
  </div>

  <!-- STUDENTS -->
  <div id="view-students" class="card" style="display:none">
    <h2>Students</h2>
    <div class="card form-box">
      <form id="studentForm" onsubmit="return saveStudent(event)">
        <input type="hidden" id="studentIndex" />
        <label>Name</label><input id="s_name" required />
        <label>Date of Birth</label><input id="s_dob" type="date" required />
        <label>Gender</label>
        <select id="s_gender" required><option value="">--Select--</option><option>Male</option><option>Female</option><option>Other</option></select>
        <label>Class</label><input id="s_class" required placeholder="Class"/>
        <label>Parent/Guardian</label><input id="s_parent" required />
        <label>Contact</label><input id="s_contact" pattern="[0-9]{10}" placeholder="10-digit" required />
        <label>Address</label><textarea id="s_address" rows="2" required></textarea>
        <div style="margin-top:8px;display:flex;gap:8px">
          <button class="primary" type="submit">Save</button>
          <button type="button" onclick="studentFormReset()">Reset</button>
          <button type="button" onclick="exportStudentsCSV()" class="small-btn">Export CSV</button>
          <button type="button" onclick="printStudents()" class="small-btn">Print</button>
        </div>
      </form>
    </div>
    <div style="margin-top:12px" class="card">
      <table id="studentsTable"><thead><tr><th>#</th><th>Name</th><th>DOB</th><th>Gender</th><th>Class</th><th>Parent</th><th>Contact</th><th>Address</th><th>Actions</th></tr></thead><tbody></tbody></table>
    </div>
  </div>

  <!-- FEES -->
  <div id="view-fees" class="card" style="display:none">
    <h2>Fees Management (₹100/month)</h2>
    <div style="margin-top:12px" class="card">
      <table id="feesTable"><thead><tr><th>#</th><th>Name</th><th>Contact</th><th>Amount</th><th>Status</th><th>Action</th></tr></thead><tbody></tbody></table>
    </div>
  </div>

  <!-- TEACHERS -->
  <div id="view-teachers" class="card" style="display:none">
    <h2>Teachers</h2>
    <div class="card form-box">
      <form id="teacherForm" onsubmit="return saveTeacher(event)">
        <input type="hidden" id="teacherIndex" />
        <label>Name</label><input id="t_name" required/>
        <label>Salary</label><input id="t_salary" type="number" min="0" required/>
        <div style="margin-top:8px;display:flex;gap:8px">
          <button class="primary" type="submit">Save</button>
          <button type="button" onclick="teacherFormReset()">Reset</button>
          <button type="button" onclick="exportTeachersCSV()" class="small-btn">Export CSV</button>
        </div>
      </form>
    </div>
    <div class="card" style="margin-top:12px">
      <table id="teachersTable"><thead><tr><th>#</th><th>Name</th><th>Salary</th><th>Action</th></tr></thead><tbody></tbody></table>
    </div>
  </div>

  <!-- REPORTS -->
  <div id="view-reports" class="card" style="display:none">
    <h2>Reports</h2>
    <canvas id="incomeChart" height="200"></canvas>
  </div>

</div>

<script>
const FEE_PER_STUDENT = 100;
let students=[],teachers=[];

function switchView(e){
  document.querySelectorAll('[id^="view-"]').forEach(v=>v.style.display='none');
  document.getElementById('view-'+e.currentTarget.dataset.view).style.display='block';
  document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
  e.currentTarget.classList.add('active');
  if(e.currentTarget.dataset.view==='dashboard') renderDashboard();
  if(e.currentTarget.dataset.view==='students') renderStudents();
  if(e.currentTarget.dataset.view==='fees') renderFees();
  if(e.currentTarget.dataset.view==='teachers') renderTeachers();
  if(e.currentTarget.dataset.view==='reports') renderReports();
}

/* ---------- Students ---------- */
function saveStudent(e){ e.preventDefault();
  const idx=document.getElementById('studentIndex').value;
  const s={name:document.getElementById('s_name').value,dob:document.getElementById('s_dob').value,gender:document.getElementById('s_gender').value,cls:document.getElementById('s_class').value,parent:document.getElementById('s_parent').value,contact:document.getElementById('s_contact').value,address:document.getElementById('s_address').value};
  if(idx===''){students.push(s);}else{students[parseInt(idx)]=s;}
  localStorage.setItem('students',JSON.stringify(students));
  studentFormReset(); renderStudents(); renderDashboard();
}
function studentFormReset(){ document.getElementById('studentIndex').value='';document.getElementById('studentForm').reset(); }
function renderStudents(){students=JSON.parse(localStorage.getItem('students')||'[]'); const tbody=document.querySelector('#studentsTable tbody');tbody.innerHTML='';students.forEach((s,i)=>{const tr=document.createElement('tr');tr.innerHTML=`<td>${i+1}</td><td>${s.name}</td><td>${s.dob}</td><td>${s.gender}</td><td>${s.cls}</td><td>${s.parent}</td><td>${s.contact}</td><td>${s.address}</td><td><button class="action-btn edit-btn" onclick="editStudent(${i})">Edit</button> <button class="action-btn del-btn" onclick="deleteStudent(${i})">Delete</button></td>`;tbody.appendChild(tr);});}
function editStudent(i){const s=students[i];document.getElementById('studentIndex').value=i;document.getElementById('s_name').value=s.name;document.getElementById('s_dob').value=s.dob;document.getElementById('s_gender').value=s.gender;document.getElementById('s_class').value=s.cls;document.getElementById('s_parent').value=s.parent;document.getElementById('s_contact').value=s.contact;document.getElementById('s_address').value=s.address;}
function deleteStudent(i){if(confirm('Delete?')){students.splice(i,1);localStorage.setItem('students',JSON.stringify(students));renderStudents();renderDashboard();}}
function exportStudentsCSV(){if(students.length===0){alert('No data');return;} const csv=['Name,DOB,Gender,Class,Parent,Contact,Address'].concat(students.map(s=>`${s.name},${s.dob},${s.gender},${s.cls},${s.parent},${s.contact},${s.address}`)).join('\n'); downloadData(csv,'students.csv','text/csv');}
function printStudents(){let html='<h3>Students</h3><table border="1" style="border-collapse:collapse"><tr><th>#</th><th>Name</th><th>DOB</th><th>Gender</th><th>Class</th><th>Parent</th><th>Contact</th><th>Address</th></tr>';students.forEach((s,i)=>{html+=`<tr><td>${i+1}</td><td>${s.name}</td><td>${s.dob}</td><td>${s.gender}</td><td>${s.cls}</td><td>${s.parent}</td><td>${s.contact}</td><td>${s.address}</td></tr>`;}); html+='</table>'; const w=window.open(); w.document.write(html); w.document.close(); w.print();}

/* ---------- Teachers ---------- */
function saveTeacher(e){e.preventDefault(); const idx=document.getElementById('teacherIndex').value; const t={name:document.getElementById('t_name').value,salary:document.getElementById('t_salary').value}; if(idx===''){teachers.push(t);}else{teachers[parseInt(idx)]=t;} localStorage.setItem('teachers',JSON.stringify(teachers));teacherFormReset();renderTeachers();renderDashboard();}
function teacherFormReset(){document.getElementById('teacherIndex').value='';document.getElementById('teacherForm').reset();}
function renderTeachers(){teachers=JSON.parse(localStorage.getItem('teachers')||'[]'); const tbody=document.querySelector('#teachersTable tbody');tbody.innerHTML='';teachers.forEach((t,i)=>{const tr=document.createElement('tr');tr.innerHTML=`<td>${i+1}</td><td>${t.name}</td><td>${t.salary}</td><td><button class="action-btn del-btn" onclick="deleteTeacher(${i})">Delete</button></td>`;tbody.appendChild(tr);});}
function deleteTeacher(i){if(confirm('Delete?')){teachers.splice(i,1);localStorage.setItem('teachers',JSON.stringify(teachers));renderTeachers();renderDashboard();}}
function exportTeachersCSV(){if(teachers.length===0){alert('No data');return;} const csv=['Name,Salary'].concat(teachers.map(t=>`${t.name},${t.salary}`)).join('\n'); downloadData(csv,'teachers.csv','text/csv');}

/* ---------- Fees ---------- */
function renderFees(){const tbody=document.querySelector('#feesTable tbody');tbody.innerHTML='';students.forEach((s,i)=>{const paid=s.paid? 'Paid':'Pending'; const tr=document.createElement('tr');tr.innerHTML=`<td>${i+1}</td><td>${s.name}</td><td>${s.contact}</td><td>${FEE_PER_STUDENT}</td><td>${paid}</td><td>${s.paid? '':`<button class="action-btn pay-btn" onclick="payFee(${i})">Pay</button>`}</td>`;tbody.appendChild(tr);});}
function payFee(i){students[i].paid=true;localStorage.setItem('students',JSON.stringify(students));renderFees();renderDashboard();}

/* ---------- Dashboard ---------- */
function renderDashboard(){students=JSON.parse(localStorage.getItem('students')||'[]');teachers=JSON.parse(localStorage.getItem('teachers')||'[]');
document.getElementById('card-students').innerText=students.length;
document.getElementById('card-teachers').innerText=teachers.length;
document.getElementById('card-income').innerText='₹'+(students.filter(s=>s.paid).length*FEE_PER_STUDENT);
renderCenterChart();}
function renderCenterChart(){const ctx=document.getElementById('centerChart').getContext('2d'); if(window.centerChart) window.centerChart.destroy(); window.centerChart=new Chart(ctx,{type:'bar',data:{labels:students.map(s=>s.name),datasets:[{label:'Fees Paid',data:students.map(s=>s.paid?FEE_PER_STUDENT:0),backgroundColor:'#007bff'}]},options:{responsive:true,plugins:{legend:{display:false}}}});}
function renderReports(){const ctx=document.getElementById('incomeChart').getContext('2d'); if(window.incomeChart) window.incomeChart.destroy(); window.incomeChart=new Chart(ctx,{type:'line',data:{labels:students.map(s=>s.name),datasets:[{label:'Fees Paid',data:students.map(s=>s.paid?FEE_PER_STUDENT:0),borderColor:'#28a745',fill:false}]},options:{responsive:true}});}

/* ---------- Helpers ---------- */
function downloadData(data,filename,type){const a=document.createElement('a');const file=new Blob([data],{type:type});a.href=URL.createObjectURL(file);a.download=filename;a.click();}

// INIT
students=JSON.parse(localStorage.getItem('students')||'[]');
teachers=JSON.parse(localStorage.getItem('teachers')||'[]');
renderDashboard();
</script>

</body>
</html>

